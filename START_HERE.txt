START_HERE.txt (tito-pdf)
Last updated: 2026-02-12
Branch: main

ONLY sources of truth (in this order)
1) START_HERE.txt (this file): operational runbook + status + exact revalidation commands
2) Warp Drive canonical plan: ba6e11a7-e4b8-4be1-b34a-4d74f3e99688
3) tito-pdf --help (installed CLI contract)
4) tito-pdf (source code)
5) MASTER_PLAN.txt (local snapshot of the Warp plan)
6) AGENTS.md (stable repo orientation; NOT a run log)

Canonical Warp plan_id: ba6e11a7-e4b8-4be1-b34a-4d74f3e99688

Quick sanity: tito vs tito-pdf
- If `tito --help` shows confusing defaults that look like env vars: that's NOT this repo.
- This repo/tool is `tito-pdf` (installed binary):
  - command -v tito-pdf
  - tito-pdf --help

Stress-proof recovery drill (run from repo root)
1) git --no-pager status
2) ls -la
3) python3 -m py_compile ./tito-pdf
4) sudo ./install/install.sh   # required after code changes (tests must use installed binary)
5) command -v tito-pdf
6) tito-pdf --help
7) ./tests/smoke/tito_pdf_smoke.sh

Status (DONE / VERIFIED / PENDING)

DONE (2026-02-12)
- Output layout aligned with TITO:
  - Deliverables go to <out-dir>/md/
    - md/<id>.retrieve.md
    - md/<id>.retrieve.tables.md
  - --keep-sessions preserves intermediates in sessions/run-YYYYMMDD_HHMMSS/
  - Explicit output mode (e.g. --md-out/--tables-out) still writes ONLY to the requested paths.
- Updated smoke test for the new contract (tests installed binary): tests/smoke/tito_pdf_smoke.sh
- Updated docs to match the contract: README.md, docs/output.md, docs/cli.md, AGENTS.md

VERIFIED (2026-02-12)
- Reinstall + smoke test:
  - sudo ./install/install.sh
  - ./tests/smoke/tito_pdf_smoke.sh
- Real PDF processed (installed binary):
  - Input: ~/github/projects/AR-S2P2T/ref/10002529-430-10RE-S0104-0009_B.pdf
  - Example:
    tito-pdf ~/github/projects/AR-S2P2T/ref/10002529-430-10RE-S0104-0009_B.pdf --id test_real --all --out-dir /tmp/tito_test
  - Expected outputs:
    /tmp/tito_test/md/test_real.retrieve.md
    /tmp/tito_test/md/test_real.retrieve.tables.md
- keep-sessions behavior:
  - tito-pdf ... --keep-sessions --out-dir /tmp/tito_test2
  - Expected intermediates:
    /tmp/tito_test2/sessions/run-YYYYMMDD_HHMMSS/prepared.pdf
    /tmp/tito_test2/sessions/run-YYYYMMDD_HHMMSS/ocr.pdf

PENDING (as of 2026-02-12)
- Verify GitHub Pages renders with the updated docs layout/permalinks (open the site and click through the main pages).
- Decide whether to add additional tests (e.g. unit tests for output-path resolution / assets-json invariants).
- Decide how to handle legacy tracked artifacts under md/ and sessions/ (they currently exist in git history).
  - Until cleaned up, avoid running tito-pdf from the repo root without --out-dir (it will write into ./md/).
- Keep local junk out of git:
  - __pycache__/

Minimal validations (2â€“6 commands)
1) python3 -m py_compile ./tito-pdf
   - Fast syntax check.
2) sudo ./install/install.sh
   - Required after code changes (validation is against installed binary).
3) tito-pdf --help
   - Must show --id and --keep-sessions (GNU-style help).
4) ./tests/smoke/tito_pdf_smoke.sh
   - End-to-end smoke against installed binary (PDF + DOCX).
5) (Optional) real PDF run:
   tito-pdf ~/github/projects/AR-S2P2T/ref/10002529-430-10RE-S0104-0009_B.pdf --id real --all --out-dir /tmp/tito_pdf_real_test
6) (Optional) sessions:
   tito-pdf ~/github/projects/AR-S2P2T/ref/10002529-430-10RE-S0104-0009_B.pdf --id sess --mode fast --keep-sessions --out-dir /tmp/tito_pdf_real_test2

References
- AGENTS.md
- MASTER_PLAN.txt
- README.md
- docs/
